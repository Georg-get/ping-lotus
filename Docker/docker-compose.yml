version: '3.9'

services:
  django:
    build: ./project
    command: sh -c "gunicorn --bind 0.0.0.0:8000 app.wsgi"
    volumes:
      - ./project:/project
      - static_data:/project/static
    expose:
      - 8000

  nginx:
    image: nginx:1.19.8-alpine
    depends_on: #запуск после Django
      - django
    ports:
      - "80:80"
    volumes:
      - static_data:/var/www/html/static
      - ./nginx-conf.d:/etc/nginx/conf.d

  #db:
    #image: mysql:5.7:13-alpine
    #volumes:
    #expose:
      #- 5432
    #environment:
       #MYSQL_DATABASE: 'db_django'
       #MYSQL_USER: 'root'
       #MYSQL_PASSWORD: 'password'
       #MYSQL_ROOT_PASSWORD: 'password'
       
  volumes:
    #mysql_data:
    static_data: